<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USRP Hardware Driver and USRP Manual: TwinRX Daughterboard</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Ettus_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">USRP Hardware Driver and USRP Manual
   &#160;<span id="projectnumber">Version: 3.15.0.main-0-37b7dc22</span>
   </div>
   <div id="projectbrief">UHD and USRP Manual</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_twinrx.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TwinRX Daughterboard </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#twinrx_dboards">TwinRX Properties</a><ul><li class="level2"><a href="#twinrx_dboards_mcr">Master Clock Rate, Sampling Rate, and Tick Rate</a></li>
<li class="level2"><a href="#twinrx_frequency_bands">Frequency Bands</a></li>
<li class="level2"><a href="#twinrx_lo_sharing">Local Oscillator Sharing</a></li>
<li class="level2"><a href="#twinrx_antenna_routing">Antenna Routing</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="twinrx_dboards"></a>
TwinRX Properties</h1>
<p>The TwinRX is a two-channel superheterodyne receiver designed for high performance spectrum monitoring and direction finding applications. The receiver is tunable from 10 MHz - 6 GHz and has 80 MHz of instantaneous bandwidth per channel, providing the versatility necessary to analyze a variety of signals in multiple bands of interest. Each channel has an independent RF signal chain with preamplifiers, preselectors, and two mixer stages for superior selectivity. Users can tune the two channels independently to simultaneously monitor uplink and downlink communication with a combined bandwidth of 160 MHz. The ability to share the LO between channels across multiple daughterboards enables the phase-aligned operation required to implement scalable multi-channel phased-arrays. The receiver is capable of fast frequency hopping to detect frequency agile emitters.</p>
<p>The TwinRX daughterboard only works with the X300/X310 series of USRPs.</p>
<h2><a class="anchor" id="twinrx_dboards_mcr"></a>
Master Clock Rate, Sampling Rate, and Tick Rate</h2>
<p>Due to the specific configuration of the analog filters, the TwinRX can only support a master clock rate of 200 MHz. Since the X310/X300 only has a single master clock, this means that the only valid tick rate for the X300/X310 is 200 MHz, even if there is another daughterboard in the same device which could support a different tick rate.</p>
<p>The TwinRX uses the dual-ADC of each X300 channel to sample two separate IF streams, thus enabling two receive channels where there usually only is one. Every IF channel is sampled at 200 MHz (real sampling), and then converted to a 100 Msps complex sample stream per channel. This means the total output of one daughterboard is 2x100 Msps, which is the same aggregate sampling rate as with single-channel daughterboards such as the UBX.</p>
<p>The tick rate is then also halved to match the sampling rate. Timed commands are executed relative to a sample edge in the I/Q domain, i.e., at a granularity of 1/100 MHz = 10 ns.</p>
<div class="image">
<img src="TwinRX_Block_Diagram.png" alt="TwinRX_Block_Diagram.png"/>
<div class="caption">
TwinRX Block Diagram</div></div>
 <h2><a class="anchor" id="twinrx_frequency_bands"></a>
Frequency Bands</h2>
<p>The receive filter banks uses switches to select between the available filters. These paths are also dependent on the antenna switch settings. Incorrectly setting the switches generally results in attenuated input / output power. Receive filters are band pass (series high &amp; low pass filters).</p>
<p>Source code related to controlling the filter band and antenna switches resides in twinrx_experts.cpp. Specifically, refer to the <code>twinrx::twinrx_freq_path_expert</code> class. Generally, these methods set the switches depending on the state of the receive streams.</p>
<p>The following sections provide switch setting tables for antenna and filter selection for frontend's receive paths. For further details refer to the schematics.</p>
<table class="doxtable">
<tr>
<th>Band </th><th>Range  </th></tr>
<tr>
<td>LB1 </td><td>10 - 500 MHz </td></tr>
<tr>
<td>LB2 </td><td>500 - 800 MHz </td></tr>
<tr>
<td>LB3 </td><td>800 - 1.2 GHz </td></tr>
<tr>
<td>LB4 </td><td>1.2 - 1.8 GHz </td></tr>
<tr>
<td>HB1 </td><td>1.8 - 3.0 GHz </td></tr>
<tr>
<td>HB2 </td><td>3.0 - 4.1 GHz </td></tr>
<tr>
<td>HB3 </td><td>4.1 - 5.1 GHz </td></tr>
<tr>
<td>HB4 </td><td>5.1 - 6.0 GHz </td></tr>
</table>
<h2><a class="anchor" id="twinrx_lo_sharing"></a>
Local Oscillator Sharing</h2>
<p>The TwinRX has the ability to export the two Local Oscillator (LO) signals from one channel to the companion channel on the same daughterboard and/or to one or more other TwinRXs in order to form a phase-synchronous multi-channel receiver.</p>
<table class="doxtable">
<tr>
<th> Connector  </th><th> Description </th><th> Min </th><th>Nominal </th><th>Damage  </th></tr>
<tr>
<td> J1   </td><td> LO2 Export </td><td> 0 dBm   </td><td>3 dBm </td><td>NA (Output) </td></tr>
<tr>
<td> J2 </td><td> LO2 Input </td><td> 0 dBm   </td><td>2 dBm </td><td>20 dBm </td></tr>
<tr>
<td> J3 </td><td> LO1 Export </td><td> -12 dBm </td><td>5 dBm </td><td>NA (Output) </td></tr>
<tr>
<td> J4 </td><td> LO1 Input </td><td> -10 dBm </td><td>-5 dBm </td><td>10 dBm </td></tr>
</table>
<h2><a class="anchor" id="twinrx_antenna_routing"></a>
Antenna Routing</h2>
<p>The TwinRX has two external antenna connectors (RX1 and RX2) which can be switched internally to either receiver channel. By default RX1 is connected to the first channel and RX2 to the second.</p>
<p>When routing the antennas in any configuration other than the default there are some behavioral changes to be aware of. As can be seen in the block diagram above the signal path from each antenna can be switched into a resistive divider and then to either or both of the receive channels. If the divider is in use the incoming signal will be slightly attenuated when compared to the direct passthrough. If both receive channels are configured to use the same antenna the first two amplifiers and are a variable attenuator are shared. The effect of this is that the first channel's gain settings for those amplifiers will override the second channel's. If both channels are tuned to the same frequency band and at similar gain settings the effect will be minimal, but if the frequency or gain difference is large the resulting gain on the second channel could be significantly lower or higher than expected. Additionally the signal path length will increase in comparison to the direct antenna mapping so the phase of the received signal will be different depending on the antenna mapping. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
